!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).mapboxGlDrawPassingMode=t()}(this,(function(){"use strict";const e="add",t="move",o="none",i="simple_select";var n={enable(e){setTimeout((()=>{e.map&&e.map.doubleClickZoom&&e._ctx&&e._ctx.store&&e._ctx.store.getInitialConfigValue&&e._ctx.store.getInitialConfigValue("doubleClickZoom")&&e.map.doubleClickZoom.enable()}),0)},disable(e){setTimeout((()=>{e.map&&e.map.doubleClickZoom&&e.map.doubleClickZoom.disable()}),0)}};return a=>{const{onSetup:l,onClick:s,onMouseMove:u,...p}=a,c={originOnSetup:l,originOnMouseMove:u,originOnClick:s,...p};return c.onSetup=function(e){const t=this.originOnSetup();return t.feature_type="point"in t?"point":"line"in t?"line":"polygon",t.callBack=e,t},c.onTap=c.onClick=function(e,o){"point"===e.feature_type?(this.updateUIClasses({mouse:t}),e.point.updateCoordinate("",o.lngLat.lng,o.lngLat.lat),"function"==typeof e.callBack?e.callBack(e.point.toGeoJSON()):this.map.fire("draw.passing-create",{features:[e.point.toGeoJSON()]}),this.changeMode(i,{},{silent:!0})):this.originOnClick(e,o)},c.onMouseMove=function(t,o){this.updateUIClasses({mouse:e}),"point"===t.feature_type?t.point.updateCoordinate(o.lngLat.lng,o.lngLat.lat):this.originOnMouseMove(t,o)},c.onStop=function(e){if("point"in e)this.activateUIButton(),this.deleteFeature([e.point.id],{silent:!0});else if("line"in e||"polygon"in e){const t=e.line||e.polygon;if(this.updateUIClasses({mouse:o}),n.enable(this),this.activateUIButton(),void 0===this.getFeature(t.id))return;t.removeCoordinate(`${e.currentVertexPosition}`),t.isValid()&&("function"==typeof e.callBack?e.callBack(t.toGeoJSON()):this.map.fire("draw.passing-create",{features:[t.toGeoJSON()]})),this.deleteFeature([t.id],{silent:!0}),this.changeMode(i,{},{silent:!0})}},c}}));
